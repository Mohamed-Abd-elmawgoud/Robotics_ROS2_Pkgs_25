<?xml version="1.0" encoding="utf-8"?>
<robot name="new_robot">

  <!-- ===== world alignment helper ===== -->
  <link name="world"/>

  <!-- ===================== base_link ===================== -->
  <link name="base_link">
    <inertial>
      <origin xyz="0.0032737377052423 0 0.022568965676566" rpy="0 0 0"/>
      <mass value="0.126025187508608"/>
      <inertia ixx="0.000117724127781853" ixy="0" ixz="-1.047e-06"
               iyy="0.000131560160703286" iyz="0" izz="0.000199906292659124"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/base_link.STL"/></geometry>
      <material name=""><color rgba="1 0.82 0.93 1"/></material>
    </visual>

    <collision>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/base_link.STL"/></geometry>
    </collision>
  </link>

  <joint name="base_link_to_world" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>


  <!-- ===================== rotating_waist ===================== -->
  <link name="rotating_waist">
    <inertial>
      <origin xyz="-0.0125 0 0.02086"/>
      <mass value="0.123597949087119"/>
      <inertia ixx="8.3288e-05" ixy="0" ixz="7.688e-06"
               iyy="7.6509e-05" iyz="0" izz="7.6539e-05"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/rotating_waist.STL"/></geometry>
      <material name=""><color rgba="1 0 0 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/rotating_waist.STL"/></geometry>
    </collision>
  </link>

  <joint name="rotating_waist_joint" type="revolute">
    <origin xyz="0 0 0.0525"/>
    <parent link="base_link"/>
    <child link="rotating_waist"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14" upper="3.14" effort="5" velocity="2"/>
  </joint>


  <!-- ===================== arm ===================== -->
  <link name="arm">
    <inertial>
      <origin xyz="0.0699 0.00217 0.0063"/>
      <mass value="0.137984699871301"/>
      <inertia ixx="3.120e-05" ixy="-1.186e-05" ixz="0"
               iyy="0.000412558" iyz="0" izz="0.000431683"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/arm.STL"/></geometry>
      <material name=""><color rgba="1 0 0 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/arm.STL"/></geometry>
    </collision>
  </link>

  <joint name="arm_joint" type="revolute">
    <origin xyz="0.004 0 0.04105" rpy="0 -1.5708 3.14"/>
    <parent link="rotating_waist"/>
    <child link="arm"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14" upper="3.14" effort="5" velocity="2"/>
  </joint>


  <!-- ===================== forearm ===================== -->
  <link name="forearm">
    <inertial>
      <origin xyz="0.04447 0 -0.01885"/>
      <mass value="0.141790967611344"/>
      <inertia ixx="3.05e-05" ixy="0" ixz="6e-07"
               iyy="0.00011989" iyz="0" izz="0.00012974"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/forearm.STL"/></geometry>
      <material name=""><color rgba="1 0 0 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry><mesh filename="package://robotics/meshes/forearm.STL"/></geometry>
    </collision>
  </link>

  <joint name="forearm_joint" type="revolute">
    <origin xyz="0.13993 0.0043497 0"/>
    <parent link="arm"/>
    <child link="forearm"/>
    <axis xyz="0 0 -1"/>
    <limit lower="-3.14" upper="3.14" effort="5" velocity="2"/>
  </joint>


  <!-- ===================== wrist ===================== -->
  <link name="wrist">
    <inertial>
      <origin xyz="0.02419 0.00139 -0.00761"/>
      <mass value="0.01872"/>
      <inertia ixx="2.214e-06" ixy="0" ixz="0"
               iyy="3.78e-06" iyz="0" izz="2.69e-06"/>
    </inertial>
    <visual>
      <geometry><mesh filename="package://robotics/meshes/wrist.STL"/></geometry>
      <material name=""><color rgba="1 0 0 1"/></material>
    </visual>
    <collision>
      <geometry><mesh filename="package://robotics/meshes/wrist.STL"/></geometry>
    </collision>
  </link>

  <joint name="wrist_joint" type="revolute">
    <origin xyz="0.1329 -0.0005 0.00305"/>
    <parent link="forearm"/>
    <child link="wrist"/>
    <axis xyz="0 0 -1"/>
    <limit lower="-3.14" upper="3.14" effort="5" velocity="2"/>
  </joint>


  <!-- ===================== end_effector ===================== -->
  <link name="end_effector">
    <inertial>
      <origin xyz="-0.00055 -0.00118 0.0196"/>
      <mass value="0.04918"/>
      <inertia ixx="1.21e-05" ixy="0" ixz="0"
               iyy="9.782e-06" iyz="0" izz="1.072e-05"/>
    </inertial>
    <visual>
      <geometry><mesh filename="package://robotics/meshes/end_effector.STL"/></geometry>
      <material name=""><color rgba="1 0 0 1"/></material>
    </visual>
    <collision>
      <geometry><mesh filename="package://robotics/meshes/end_effector.STL"/></geometry>
    </collision>
  </link>

  <joint name="end_effector_joint" type="revolute">
    <origin xyz="0.0523 0  -0.0052" rpy="0 1.5708 0"/>
    <parent link="wrist"/>
    <child link="end_effector"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14" upper="3.14" effort="5" velocity="2"/>
  </joint>


  <!-- ===================== EE_frame ===================== -->
   <!-- <link name="EE_frame">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.001"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.005"/>
      </geometry>
      <material name="green">
        <color rgba="0 1 0 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="EE_frame_lock" type="fixed">
    <parent link="end_effector"/>
    <child link="EE_frame"/>
    <origin xyz="0.09 0 0"/>
  </joint> -->


  <!-- ===================== ROS 2 CONTROL ===================== -->
  <ros2_control name="new_robot_control" type="system">
  <hardware>
    <plugin>gz_ros2_control/GazeboSimSystem</plugin>
  </hardware>

  <joint name="rotating_waist_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
  </joint>

  <joint name="arm_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
  </joint>

  <joint name="forearm_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
  </joint>

  <joint name="wrist_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
  </joint>

  <joint name="end_effector_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
  </joint>
</ros2_control>


  <!-- ===================== GAZEBO SIM PLUGIN ===================== -->
  <gazebo>
    <plugin filename="gz_ros2_control-system"
            name="gz_ros2_control::GazeboSimROS2ControlPlugin">
      <parameters>
        /home/dell/robotics/install/robotics/share/robotics/config/controllers.yaml
      </parameters>
      <link_state_publish_rate>100</link_state_publish_rate>
    </plugin>
  </gazebo>

</robot>
